---
inclusion: manual
---
# å‘å¸ƒå·¥ä½œæµ

ä»£ç ä¿®æ”¹å®Œæˆåï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤æ‰§è¡Œå‘å¸ƒæµç¨‹ã€‚

## 1. æ›´æ–°ç‰ˆæœ¬å·ï¼ˆè‡ªåŠ¨åˆ¤æ–­ï¼‰

æ ¹æ® [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/) è§„èŒƒè‡ªåŠ¨åˆ¤æ–­ç‰ˆæœ¬å·ï¼š

| æ”¹åŠ¨ç±»å‹            | ç‰ˆæœ¬å˜åŒ– | ç¤ºä¾‹           |
| ------------------- | -------- | -------------- |
| é‡å¤§å˜æ›´/ä¸å…¼å®¹ API | MAJOR +1 | 1.0.0 â†’ 2.0.0 |
| æ–°åŠŸèƒ½ï¼ˆfeatï¼‰      | MINOR +1 | 1.0.0 â†’ 1.1.0 |
| Bug ä¿®å¤ï¼ˆfixï¼‰     | PATCH +1 | 1.0.0 â†’ 1.0.1 |
| æ€§èƒ½ä¼˜åŒ–ï¼ˆperfï¼‰    | PATCH +1 | 1.0.0 â†’ 1.0.1 |
| é‡æ„/æ–‡æ¡£/æµ‹è¯•      | ä¸å‡çº§   | 1.0.0 â†’ 1.0.0 |

**åˆ¤æ–­è§„åˆ™ï¼š**

1. æŸ¥çœ‹ `git diff` æˆ– `git status` ç¡®å®šæ”¹åŠ¨å†…å®¹
2. æ ¹æ®æ”¹åŠ¨ç±»å‹å†³å®šæ˜¯å¦å‡çº§ç‰ˆæœ¬
3. **ç‰ˆæœ¬å·åªéœ€ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶**ï¼Œå…¶ä»–åœ°æ–¹è‡ªåŠ¨åŒæ­¥ï¼š

```
cf_proxy_manager/__init__.py   â†’ __version__ = "x.x.x"
```

**ç‰ˆæœ¬å·è‡ªåŠ¨åŒæ­¥æœºåˆ¶ï¼š**
- `cf_proxy_manager.spec` ä¼šè‡ªåŠ¨è¯»å– `__init__.py` ä¸­çš„ç‰ˆæœ¬å·
- EXE æ–‡ä»¶åè‡ªåŠ¨å˜ä¸º `è™å“¥APIåä»£-vx.x.x.exe`
- ç¨‹åºæ ‡é¢˜è‡ªåŠ¨æ˜¾ç¤º `ğŸ¯ è™å“¥APIåä»£ vx.x.x`

## 2. æ›´æ–° Steering æ–‡æ¡£ï¼ˆæŒ‰éœ€ï¼‰

æ ¹æ®æœ¬æ¬¡æ”¹åŠ¨ç±»å‹ï¼Œæ£€æŸ¥å¹¶æ›´æ–° `.kiro/steering/` ä¸‹çš„æ–‡æ¡£ï¼š

| å˜æ›´ç±»å‹             | éœ€æ›´æ–°çš„æ–‡ä»¶   |
| -------------------- | -------------- |
| æ–°å¢/åˆ é™¤/é‡å‘½åæ¨¡å— | `structure.md` |
| æ–°å¢/åˆ é™¤åŠŸèƒ½        | `product.md`   |
| ä¾èµ–å˜æ›´             | `tech.md`      |
| æ„å»ºå‘½ä»¤å˜æ›´         | `tech.md`      |

## 3. æ›´æ–° READMEï¼ˆæŒ‰éœ€ï¼‰

å¦‚æœæœ¬æ¬¡ä¿®æ”¹æ¶‰åŠæ–°åŠŸèƒ½ã€é‡å¤§ Bug ä¿®å¤ã€ä¾èµ–å˜æ›´ã€ä½¿ç”¨æ–¹å¼å˜æ›´ï¼Œåˆ™æ›´æ–° `README.md`ã€‚

## 4. è¿è¡Œæµ‹è¯•

```powershell
python -m pytest cf_proxy_manager/tests/ -v
```

ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡åå†æäº¤ã€‚

## 5. æäº¤ GitHub

```bash
git add .
git commit -m "<type>: <ç®€çŸ­æè¿°>"
git push origin main
```

### Commit ç±»å‹

| ç±»å‹     | è¯´æ˜                   |
| -------- | ---------------------- |
| feat     | æ–°åŠŸèƒ½                 |
| fix      | Bug ä¿®å¤               |
| perf     | æ€§èƒ½ä¼˜åŒ–               |
| refactor | ä»£ç é‡æ„               |
| docs     | æ–‡æ¡£æ›´æ–°               |
| style    | ä»£ç æ ¼å¼               |
| test     | æµ‹è¯•ç›¸å…³               |
| chore    | æ„å»º/å·¥å…·å˜æ›´          |

## 6. æ‰“åŒ… EXE

```powershell
# æ¸…ç†æ—§ç‰ˆæœ¬
Remove-Item dist\*.exe -ErrorAction SilentlyContinue

# æ‰“åŒ…ï¼ˆEXE æ–‡ä»¶åè‡ªåŠ¨å¸¦ç‰ˆæœ¬å·ï¼‰
python -m PyInstaller cf_proxy_manager.spec --noconfirm --clean
```

æ‰“åŒ…äº§ç‰©ï¼š`dist/è™å“¥APIåä»£-vx.x.x.exe`

## 7. å‘å¸ƒ Release

```powershell
# è·å–ç‰ˆæœ¬å·
$version = (Get-Content cf_proxy_manager/__init__.py | Select-String '__version__').ToString() -replace '.*"(.+)".*', '$1'

# åˆ›å»º Release
gh release create "v$version" "dist/è™å“¥APIåä»£-v$version.exe" --repo wangwingzero/tiger-api-proxy --title "v$version - <ç®€çŸ­æè¿°>" --notes-file release-notes.md
```

æˆ–æ‰‹åŠ¨æ“ä½œï¼š
1. è®¿é—® https://github.com/wangwingzero/tiger-api-proxy/releases
2. ç‚¹å‡» Draft a new release
3. Tag: `vx.x.x`ï¼ŒTitle: `vx.x.x - <æè¿°>`
4. ä¸Šä¼  `è™å“¥APIåä»£-vx.x.x.exe`
5. ç‚¹å‡» Publish release

### Release Notes æ¨¡æ¿

```markdown
## âœ¨ æ–°åŠŸèƒ½ / ğŸ› Bug ä¿®å¤ / âš¡ æ€§èƒ½ä¼˜åŒ–

- å…·ä½“æ”¹åŠ¨å†…å®¹

## ğŸ“¦ ä¸‹è½½

ä¸‹è½½ `è™å“¥APIåä»£-vx.x.x.exe` å³å¯ä½¿ç”¨ã€‚
```

## å¿«é€Ÿæ£€æŸ¥æ¸…å•

- [ ] ç‰ˆæœ¬å·å·²æ›´æ–°ï¼ˆ`cf_proxy_manager/__init__.py`ï¼‰
- [ ] æµ‹è¯•å…¨éƒ¨é€šè¿‡
- [ ] ä»£ç å·²æäº¤å¹¶æ¨é€
- [ ] EXE å·²æ‰“åŒ…æµ‹è¯•
- [ ] Release å·²åˆ›å»ºå¹¶ä¸Šä¼ 

## æ³¨æ„äº‹é¡¹

- é‡æ„ã€æ–‡æ¡£ã€æµ‹è¯•ç­‰ä¸å½±å“åŠŸèƒ½çš„æ”¹åŠ¨ï¼Œæ— éœ€å‡çº§ç‰ˆæœ¬å·
- feat/fix/perf ç±»å‹çš„æ”¹åŠ¨éœ€è¦å‡çº§ç‰ˆæœ¬å¹¶åˆ›å»º Release
- **ç‰ˆæœ¬å·åªéœ€æ”¹ä¸€å¤„**ï¼š`cf_proxy_manager/__init__.py`
